<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Dados de Energia</title>
</head>
<body>
    <h1>Inserir Dados de Energia</h1>
    <form action="/" method="POST">
        <p>Geração Diária (Placas): <input type="number" name="geracao_diaria_placas" step="0.01" required> kWh</p>
        <p>Total consumido hoje: <input type="number" name="consumo_total_hoje" step="0.01" required> kWh</p>
        <p>Total consumido ontem: <input type="number" name="consumo_total_ontem" step="0.01" required> kWh</p>
        <p>Total injetado hoje: <input type="number" name="injetado_total" step="0.01" required> kWh</p>
        <p>Consumo Diário: <input type="number" id="consumo_diario" step="0.01" readonly value="{{ consumo_diario }}"> kWh</p>
        <p>Injeção Diária: <input type="number" id="injecao_diaria" step="0.01" readonly value="{{ injecao_diaria }}"> kWh</p>
        <p>Data da coleta: <input type="date" name="data_registro_usuario" required></p>
        <p>Hora da coleta: <input type="time" name="hora_registro_usuario" required></p>
        <p>Hora do Registro (APP Placas): <input type="time" name="hora_registro_placas" required></p>
        <button type="submit" name="calcular">Calcular</button>
    </form>
    <form action="/limpar" method="POST">
        <button type="submit">Limpar Dados</button>
    </form>
    <form action="/exportar" method="GET">
        <button type="submit">Exportar CSV</button>
    </form>
    <p><a href="/editar">Editar Registros</a></p>
    {% if resultado %}
    <div id="resultado">
        <p>Excedente: {{ resultado.excedente }} kWh</p>
        <p>Déficit: {{ resultado.deficit }} kWh</p>
    </div>
    {% elif erro %}
    <div id="erro">
        <p>{{ erro }}</p>
    </div>
    {% endif %}
</body>
</html>
